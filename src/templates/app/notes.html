{% extends "base.html" %}
{% block title %}Notes — Meeting Prep Agent{% endblock %}
{% block content %}
  <h1>Meeting notes</h1>
  <p class="muted">Notes are reused in future prep for similar meetings. <a href="{{ url_for('notes_add') }}">Add note</a></p>
  <form method="get" action="{{ url_for('notes_search') }}" style="margin-bottom: 1rem;">
    <input type="text" name="q" placeholder="Search notes..." value="{{ search_query or '' }}">
    <button type="submit">Search</button>
  </form>

  {% if notes %}
  <div class="card">
    <ul style="list-style: none; padding: 0;">
      {% for n in notes %}
      <li style="padding: 0.75rem 0; border-bottom: 1px solid var(--border);">
        <strong>{{ n.meeting_title }}</strong>
        <span class="muted"> · {{ n.date }} · {{ n.id }}</span>
        <p class="muted" style="margin: 0.25rem 0 0;">{{ n.content[:200] }}{% if n.content|length > 200 %}...{% endif %}</p>
        {% if n.action_items %}<span class="muted">Action items: {{ n.action_items|length }}</span>{% endif %}
      </li>
      {% endfor %}
    </ul>
  </div>
  {% else %}
  <div class="card">
    <p class="muted">No notes yet. <a href="{{ url_for('notes_add') }}">Add one</a> after a meeting to reuse in future prep.</p>
  </div>
  {% endif %}
{% endblock %}
