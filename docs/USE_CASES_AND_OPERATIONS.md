# Use Cases, Failure Modes & How to Run / Deploy

## Is everything done?

**Yes.** The following are implemented and usable today:

- **Pipeline:** Fetch events → filter/dedup/prioritize → AI briefs (Claude) → daily digest email.
- **Calendar sources:** Google Calendar, Outlook/Teams, manual meetings, iCal/UniTime, university events (e.g. Purdue).
- **Reference docs:** Tag PDFs or paste content (e.g. Google Docs) by category; order and detect redundancy; inject into prep.
- **Meeting notes:** Add notes; auto-reuse for similar meetings; search and export.
- **Interfaces:** CLI (`python -m src.main`) and web app (`python -m src.app`).
- **Calendar options:** Enable/disable sources in `config.yaml` or in the web app **Calendars** page.

---

## Use cases

1. **Daily morning digest**  
   Get one email at 8 AM with AI prep for all of today’s meetings (talking points, questions, context). Use `--run` once or `--schedule` for daily runs.

2. **Tagged reference sheets (events, networking, interviews)**  
   Add PDFs or paste Google Doc content and tag them to categories (e.g. `interview`, `networking`). The AI uses only the relevant docs for each meeting type, in the order you set. No fluff: only the most relevant points are pulled in.

3. **Remove redundancy and set order**  
   Use `--list-docs` to see docs per category, `--reorder-docs CATEGORY path1 path2` to set priority order, and `--detect-redundancy [CATEGORY]` to find similar docs so you can remove duplicates with `--remove-doc`.

4. **Reuse meeting notes**  
   After a meeting, add notes with `--add-note`. They’re reused automatically for future prep when the same or similar meeting (title/attendees) appears. You can also `--search-notes "keyword"` and `--export-notes` to reuse notes elsewhere.

5. **Manual and university events**  
   Add one-off meetings with `--add-meeting` or pull in university events with `--events`; both get the same AI prep and reference-doc treatment.

6. **Multi-calendar**  
   Merge Google Calendar, Outlook, and Teams so one digest covers everything, with dedup and priority scoring.

7. **UniTime / university timetables**  
   Students (or instructors) add their UniTime “iCalendar URL” (Personal Timetable → Export); classes and exams appear in the digest with AI prep. Any other .ics feed works the same way.

8. **Single place for calendar options**  
   Use the web app **Calendars** page to see which sources are on/off and to add or remove iCal URLs without editing YAML.

---

## What the tool cannot do

| Cannot do | Why / workaround |
|-----------|-------------------|
| **Create or edit calendar events** | Read-only. It only *reads* calendars and sends a digest. To add/change events, use your calendar app or the app’s “Manual meetings” (stored locally, not written back to Google/Outlook). |
| **Send from a non-Gmail address** | Email is sent via Gmail SMTP. For another provider you’d need to change `email_smtp_*` in config and possibly adjust the code. |
| **Run without Claude API** | Briefs are generated by Claude. If the API is down or you skip it, you only get a minimal fallback brief (no rich talking points/questions). |
| **Sync notes into Google/Outlook** | Meeting notes live in `meeting_notes.json` only. They’re reused inside the app for future prep; they are not pushed to any calendar or task system. |
| **Support Apple Calendar / CalDAV directly** | No built-in CalDAV client. You can export an .ics feed from Apple Calendar (if your provider supports it) and add it as an iCal subscription. |
| **Authenticate as “a team” or shared mailbox** | Google and Outlook auth are per-user (your own account). No shared or bot-account calendar support out of the box. |
| **Record or transcribe meetings** | No recording, no live transcription, no post-meeting AI summary of what was said. You add notes manually with `--add-note` or the web app. |
| **Change calendar options from the UI** | The web app shows Google/Outlook/ical on/off and manages iCal URLs. Turning Google or Outlook on/off still requires editing `config.yaml` (and credentials). |
| **Guarantee real-time calendar state** | Events are fetched at run time (e.g. when you run the pipeline or at 8 AM). No live push or sub-minute updates. |
| **Support every university’s events API** | Only Localist (e.g. Purdue) is preconfigured. Other campuses need a similar API or an .ics feed added as an iCal subscription. |

---

## Where it can fail and how to fix it

| Failure | Cause | What to do |
|--------|--------|------------|
| **No events in digest** | Calendars not connected or no events in window | Run `--dry-run` and check “[1/5] Fetching…”. Add Google/Outlook credentials or use `--add-meeting`. Ensure `config.yaml` has the right `lookahead_hours` and filters. |
| **Email not sent** | Wrong Gmail app password or SMTP | Use an App Password (not your normal password). Set `EMAIL_SENDER`, `EMAIL_APP_PASSWORD`, `EMAIL_RECIPIENT` in `.env`. Check `config.yaml` for `smtp_server` / `smtp_port`. |
| **Claude API error** | Invalid/missing key or rate limit | Set `ANTHROPIC_API_KEY` in `.env`. If rate limited, wait or reduce number of meetings per run. |
| **Reference docs not used** | Doc not tagged or wrong category | Tag with `--tag-doc file category` or `--add-inline-doc`. Categories must match event classification (e.g. `interview`, `networking`). Use `--list-docs` to confirm. |
| **PDF content missing** | PyPDF2 not installed or broken PDF | `pip install PyPDF2`. If the PDF is scanned/image-only, copy text to a `.txt` file or use `--add-inline-doc` and paste. |
| **Redundancy / wrong order** | Multiple overlapping docs or order not set | Run `--detect-redundancy [category]`, then `--remove-doc` for duplicates. Use `--reorder-docs CATEGORY path1 path2 ...` to set order. |
| **Past notes not in prep** | Title/attendees don’t match | Notes are matched by title and attendee overlap. Add notes with `--add-note` using the same meeting title/attendees you use on the calendar. |
| **Scheduler doesn’t run** | Process stopped or wrong timezone | Scheduler runs in the process that started it. Use a system cron or a long-lived process. Set `scheduler.timezone` in `config.yaml` to your timezone. |
| **Google/OAuth errors** | Missing or expired credentials | Re-download `credentials.json` from Google Cloud and re-run; re-authorize if token expired. Same idea for Outlook: re-do device flow if token expired. |

---

## How to run it locally

### One-time setup

```bash
cd meeting-prep-agent
python3 -m venv .venv
source .venv/bin/activate   # Windows: .venv\Scripts\activate
pip install -r requirements.txt
cp .env.example .env
# Edit .env: ANTHROPIC_API_KEY, EMAIL_*, optional GOOGLE_CREDENTIALS_PATH, OUTLOOK_CLIENT_ID
```

Optional: put `credentials.json` (Google OAuth) in the project root and set `config.yaml` (e.g. `google.enabled: true`).

### Commands (from project root, with venv active)

```bash
# Run pipeline once and send email
python -m src.main --run

# Preview only (no email)
python -m src.main --dry-run

# Daily scheduler (runs at time in config.yaml, e.g. 8 AM)
python -m src.main --schedule

# Reference docs
python -m src.main --tag-doc my.pdf interview
python -m src.main --add-inline-doc
python -m src.main --list-docs
python -m src.main --reorder-docs interview first.pdf second.pdf
python -m src.main --detect-redundancy interview
python -m src.main --remove-doc path-or-inline-id

# Meeting notes (reuse)
python -m src.main --add-note
python -m src.main --list-notes
python -m src.main --action-items
python -m src.main --search-notes "project X"
python -m src.main --export-notes

# Manual / university
python -m src.main --add-meeting
python -m src.main --list-meetings
python -m src.main --events
```

---

## Deployment (GitHub, Render, LinkedIn)

- **GitHub:** The repo is a normal GitHub repo. Push your code (do **not** commit `.env` or `credentials.json`). You can link it on LinkedIn as “Meeting Prep Agent” and point to the repo or a short README.

- **Render / other clouds:**  
  - This app is **not** deployed for you by default. It’s built to run on your machine (or a server you control) so it can read your calendars and send email as you.  
  - To run it on Render (or similar):
    - Use a **background worker** (not a web service) that runs `python -m src.main --schedule` and sleeps until the next run, or use a **cron job** that runs `python -m src.main --run` at 8 AM.
    - Add env vars in Render: `ANTHROPIC_API_KEY`, `EMAIL_SENDER`, `EMAIL_APP_PASSWORD`, `EMAIL_RECIPIENT`, and optionally `OUTLOOK_CLIENT_ID`. Do **not** put Google `credentials.json` in the repo; for Render you’d need to provide credentials via env or a secure store and have the code load them at runtime.
  - For a **portfolio/LinkedIn** demo you can:
    - Describe it as “runs locally / on a server” and link to the GitHub repo, or  
    - Deploy a worker on Render that runs `--run` on a schedule and document that in the README.

- **LinkedIn:** You can publish it as a project: “AI Meeting Prep Agent – aggregates calendars, uses Claude for prep, sends a daily digest; supports reference PDFs/Google Docs and meeting notes reuse.” Link to the repo and optionally to this doc or the README for “how it works” and “how to run locally.”

---

## Summary

- **Done:** Full pipeline, all calendar sources (Google, Outlook, manual, iCal/UniTime, university events), reference docs (tag, order, redundancy), meeting notes (add, reuse, search, export), CLI + web app, calendar options page.  
- **Use cases:** Daily digest, tagged reference sheets (order + redundancy), meeting notes reuse, multi-calendar, manual/university events, UniTime/timetables, single place for calendar options.  
- **Cannot do:** Create/edit calendar events, send from non-Gmail, run without Claude, sync notes to calendars, native Apple/CalDAV, team/shared auth, recording/transcription, change Google/Outlook on/off from UI, real-time calendar updates, every university’s API.  
- **Failures:** Mostly config (env, credentials, filters) or tagging/order; the “Where it can fail” table and CLI commands cover fixes.  
- **Run locally:** Venv, `.env`, then `python -m src.main --run` / `--schedule` or `python -m src.app`.  
- **Deploy:** Repo ready for GitHub/LinkedIn; Render (or similar) can run the pipeline on a schedule with env vars and a worker/cron; no automatic deployment included.
